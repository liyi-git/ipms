define("echarts/chart/gauge",["require","./base","../util/shape/GaugePointer","zrender/shape/Text","zrender/shape/Line","zrender/shape/Rectangle","zrender/shape/Circle","zrender/shape/Sector","../config","../util/ecData","../util/accMath","zrender/tool/util","../chart"],function(e){var d=e("./base");var j=e("../util/shape/GaugePointer");var g=e("zrender/shape/Text");var c=e("zrender/shape/Line");var m=e("zrender/shape/Rectangle");var a=e("zrender/shape/Circle");var h=e("zrender/shape/Sector");var l=e("../config");l.gauge={zlevel:0,z:2,center:["50%","50%"],clickable:true,legendHoverLink:true,radius:"75%",startAngle:225,endAngle:-45,min:0,max:100,splitNumber:10,axisLine:{show:true,lineStyle:{color:[[0.2,"#228b22"],[0.8,"#48b"],[1,"#ff4500"]],width:30}},axisTick:{show:true,splitNumber:5,length:8,lineStyle:{color:"#eee",width:1,type:"solid"}},axisLabel:{show:true,textStyle:{color:"auto"}},splitLine:{show:true,length:30,lineStyle:{color:"#eee",width:2,type:"solid"}},pointer:{show:true,length:"80%",width:8,color:"auto"},title:{show:true,offsetCenter:[0,"-40%"],textStyle:{color:"#333",fontSize:15}},detail:{show:true,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:40,offsetCenter:[0,"40%"],textStyle:{color:"auto",fontSize:30}}};var b=e("../util/ecData");var i=e("../util/accMath");var f=e("zrender/tool/util");function k(q,n,r,p,o){d.call(this,q,n,r,p,o);this.refresh(p)}k.prototype={type:l.CHART_TYPE_GAUGE,_buildShape:function(){var p=this.series;this._paramsMap={};this.selectedMap={};for(var o=0,n=p.length;o<n;o++){if(p[o].type===l.CHART_TYPE_GAUGE){this.selectedMap[p[o].name]=true;p[o]=this.reformOption(p[o]);this.legendHoverLink=p[o].legendHoverLink||this.legendHoverLink;this._buildSingleGauge(o);this.buildMark(o)}}this.addShapeList()},_buildSingleGauge:function(n){var o=this.series[n];this._paramsMap[n]={center:this.parseCenter(this.zr,o.center),radius:this.parseRadius(this.zr,o.radius),startAngle:o.startAngle.toFixed(2)-0,endAngle:o.endAngle.toFixed(2)-0};this._paramsMap[n].totalAngle=this._paramsMap[n].startAngle-this._paramsMap[n].endAngle;this._colorMap(n);this._buildAxisLine(n);this._buildSplitLine(n);this._buildAxisTick(n);this._buildAxisLabel(n);this._buildPointer(n);this._buildTitle(n);this._buildDetail(n)},_buildAxisLine:function(B){var w=this.series[B];if(!w.axisLine.show){return}var y=w.min;var F=w.max-y;var D=this._paramsMap[B];var E=D.center;var z=D.startAngle;var s=D.totalAngle;var p=D.colorArray;var o=w.axisLine.lineStyle;var n=this.parsePercent(o.width,D.radius[1]);var u=D.radius[1];var C=u-n;var t;var q=z;var v;for(var A=0,x=p.length;A<x;A++){v=z-s*(p[A][0]-y)/F;t=this._getSector(E,C,u,v,q,p[A][1],o,w.zlevel,w.z);q=v;t._animationAdd="r";b.set(t,"seriesIndex",B);b.set(t,"dataIndex",A);this.shapeList.push(t)}},_buildSplitLine:function(A){var v=this.series[A];if(!v.splitLine.show){return}var D=this._paramsMap[A];var q=v.splitNumber;var w=v.min;var G=v.max-w;var t=v.splitLine;var o=this.parsePercent(t.length,D.radius[1]);var n=t.lineStyle;var x=n.color;var E=D.center;var y=D.startAngle*Math.PI/180;var s=D.totalAngle*Math.PI/180;var u=D.radius[1];var B=u-o;var C;var p;var F;for(var z=0;z<=q;z++){C=y-s/q*z;p=Math.sin(C);F=Math.cos(C);this.shapeList.push(new c({zlevel:v.zlevel,z:v.z+1,hoverable:false,style:{xStart:E[0]+F*u,yStart:E[1]-p*u,xEnd:E[0]+F*B,yEnd:E[1]-p*B,strokeColor:x==="auto"?this._getColor(A,w+G/q*z):x,lineType:n.type,lineWidth:n.width,shadowColor:n.shadowColor,shadowBlur:n.shadowBlur,shadowOffsetX:n.shadowOffsetX,shadowOffsetY:n.shadowOffsetY}}))}},_buildAxisTick:function(C){var w=this.series[C];if(!w.axisTick.show){return}var F=this._paramsMap[C];var s=w.splitNumber;var y=w.min;var I=w.max-y;var n=w.axisTick;var u=n.splitNumber;var p=this.parsePercent(n.length,F.radius[1]);var o=n.lineStyle;var z=o.color;var G=F.center;var A=F.startAngle*Math.PI/180;var t=F.totalAngle*Math.PI/180;var v=F.radius[1];var D=v-p;var E;var q;var H;for(var B=0,x=s*u;B<=x;B++){if(B%u===0){continue}E=A-t/x*B;q=Math.sin(E);H=Math.cos(E);this.shapeList.push(new c({zlevel:w.zlevel,z:w.z+1,hoverable:false,style:{xStart:G[0]+H*v,yStart:G[1]-q*v,xEnd:G[0]+H*D,yEnd:G[1]-q*D,strokeColor:z==="auto"?this._getColor(C,y+I/x*B):z,lineType:o.type,lineWidth:o.width,shadowColor:o.shadowColor,shadowBlur:o.shadowBlur,shadowOffsetX:o.shadowOffsetX,shadowOffsetY:o.shadowOffsetY}}))}},_buildAxisLabel:function(y){var s=this.series[y];if(!s.axisLabel.show){return}var p=s.splitNumber;var u=s.min;var D=s.max-u;var o=s.axisLabel.textStyle;var r=this.getFont(o);var v=o.color;var B=this._paramsMap[y];var C=B.center;var w=B.startAngle;var q=B.totalAngle;var z=B.radius[1]-this.parsePercent(s.splitLine.length,B.radius[1])-5;var A;var n;var E;var t;for(var x=0;x<=p;x++){t=i.accAdd(u,i.accMul(i.accDiv(D,p),x));A=w-q/p*x;n=Math.sin(A*Math.PI/180);E=Math.cos(A*Math.PI/180);A=(A+360)%360;this.shapeList.push(new g({zlevel:s.zlevel,z:s.z+1,hoverable:false,style:{x:C[0]+E*z,y:C[1]-n*z,color:v==="auto"?this._getColor(y,t):v,text:this._getLabelText(s.axisLabel.formatter,t),textAlign:A>=110&&A<=250?"left":A<=70||A>=290?"right":"center",textBaseline:A>=10&&A<=170?"top":A>=190&&A<=350?"bottom":"middle",textFont:r,shadowColor:o.shadowColor,shadowBlur:o.shadowBlur,shadowOffsetX:o.shadowOffsetX,shadowOffsetY:o.shadowOffsetY}}))}},_buildPointer:function(u){var v=this.series[u];if(!v.pointer.show){return}var w=v.max-v.min;var n=v.pointer;var t=this._paramsMap[u];var q=this.parsePercent(n.length,t.radius[1]);var p=this.parsePercent(n.width,t.radius[1]);var o=t.center;var y=this._getValue(u);y=y<v.max?y:v.max;var r=(t.startAngle-t.totalAngle/w*(y-v.min))*Math.PI/180;var s=n.color==="auto"?this._getColor(u,y):n.color;var x=new j({zlevel:v.zlevel,z:v.z+1,clickable:this.query(v,"clickable"),style:{x:o[0],y:o[1],r:q,startAngle:t.startAngle*Math.PI/180,angle:r,color:s,width:p,shadowColor:n.shadowColor,shadowBlur:n.shadowBlur,shadowOffsetX:n.shadowOffsetX,shadowOffsetY:n.shadowOffsetY},highlightStyle:{brushType:"fill",width:p>2?2:p/2,color:"#fff"}});b.pack(x,this.series[u],u,this.series[u].data[0],0,this.series[u].data[0].name,y);this.shapeList.push(x);this.shapeList.push(new a({zlevel:v.zlevel,z:v.z+2,hoverable:false,style:{x:o[0],y:o[1],r:n.width/2.5,color:"#fff"}}))},_buildTitle:function(q){var s=this.series[q];if(!s.title.show){return}var r=s.data[0];var n=r.name!=null?r.name:"";if(n!==""){var w=s.title;var o=w.offsetCenter;var t=w.textStyle;var z=t.color;var p=this._paramsMap[q];var v=p.center[0]+this.parsePercent(o[0],p.radius[1]);var u=p.center[1]+this.parsePercent(o[1],p.radius[1]);this.shapeList.push(new g({zlevel:s.zlevel,z:s.z+(Math.abs(v-p.center[0])+Math.abs(u-p.center[1])<t.fontSize*2?2:1),hoverable:false,style:{x:v,y:u,color:z==="auto"?this._getColor(q):z,text:n,textAlign:"center",textFont:this.getFont(t),shadowColor:t.shadowColor,shadowBlur:t.shadowBlur,shadowOffsetX:t.shadowOffsetX,shadowOffsetY:t.shadowOffsetY}}))}},_buildDetail:function(q){var r=this.series[q];if(!r.detail.show){return}var s=r.detail;var n=s.offsetCenter;var p=s.backgroundColor;var t=s.textStyle;var z=t.color;var o=this._paramsMap[q];var w=this._getValue(q);var v=o.center[0]-s.width/2+this.parsePercent(n[0],o.radius[1]);var u=o.center[1]+this.parsePercent(n[1],o.radius[1]);this.shapeList.push(new m({zlevel:r.zlevel,z:r.z+(Math.abs(v+s.width/2-o.center[0])+Math.abs(u+s.height/2-o.center[1])<t.fontSize?2:1),hoverable:false,style:{x:v,y:u,width:s.width,height:s.height,brushType:"both",color:p==="auto"?this._getColor(q,w):p,lineWidth:s.borderWidth,strokeColor:s.borderColor,shadowColor:s.shadowColor,shadowBlur:s.shadowBlur,shadowOffsetX:s.shadowOffsetX,shadowOffsetY:s.shadowOffsetY,text:this._getLabelText(s.formatter,w),textFont:this.getFont(t),textPosition:"inside",textColor:z==="auto"?this._getColor(q,w):z}}))},_getValue:function(n){return this.getDataFromOption(this.series[n].data[0])},_colorMap:function(p){var u=this.series[p];var r=u.min;var t=u.max-r;var o=u.axisLine.lineStyle.color;if(!(o instanceof Array)){o=[[1,o]]}var s=[];for(var q=0,n=o.length;q<n;q++){s.push([o[q][0]*t+r,o[q][1]])}this._paramsMap[p].colorArray=s},_getColor:function(o,r){if(r==null){r=this._getValue(o)}var q=this._paramsMap[o].colorArray;for(var p=0,n=q.length;p<n;p++){if(q[p][0]>=r){return q[p][1]}}return q[q.length-1][1]},_getSector:function(o,q,n,v,p,s,t,u,w){return new h({zlevel:u,z:w,hoverable:false,style:{x:o[0],y:o[1],r0:q,r:n,startAngle:v,endAngle:p,brushType:"fill",color:s,shadowColor:t.shadowColor,shadowBlur:t.shadowBlur,shadowOffsetX:t.shadowOffsetX,shadowOffsetY:t.shadowOffsetY}})},_getLabelText:function(n,o){if(n){if(typeof n==="function"){return n.call(this.myChart,o)}else{if(typeof n==="string"){return n.replace("{value}",o)}}}return o},refresh:function(n){if(n){this.option=n;this.series=n.series}this.backupShapeList();this._buildShape()}};f.inherits(k,d);e("../chart").define("gauge",k);return k});define("echarts/util/shape/GaugePointer",["require","zrender/shape/Base","zrender/tool/util","./normalIsCover"],function(b){var c=b("zrender/shape/Base");var a=b("zrender/tool/util");function d(e){c.call(this,e)}d.prototype={type:"gauge-pointer",buildPath:function(f,h){var i=h.r;var g=h.width;var j=h.angle;var e=h.x-Math.cos(j)*g*(g>=i/3?1:2);var k=h.y+Math.sin(j)*g*(g>=i/3?1:2);j=h.angle-Math.PI/2;f.moveTo(e,k);f.lineTo(h.x+Math.cos(j)*g,h.y-Math.sin(j)*g);f.lineTo(h.x+Math.cos(h.angle)*i,h.y-Math.sin(h.angle)*i);f.lineTo(h.x-Math.cos(j)*g,h.y+Math.sin(j)*g);f.lineTo(e,k);return},getRect:function(g){if(g.__rect){return g.__rect}var f=g.width*2;var j=g.x;var h=g.y;var e=j+Math.cos(g.angle)*g.r;var i=h-Math.sin(g.angle)*g.r;g.__rect={x:Math.min(j,e)-f,y:Math.min(h,i)-f,width:Math.abs(j-e)+f,height:Math.abs(h-i)+f};return g.__rect},isCover:b("./normalIsCover")};a.inherits(d,c);return d});define(["echarts","echarts/chart/gauge"],function(a){return a});