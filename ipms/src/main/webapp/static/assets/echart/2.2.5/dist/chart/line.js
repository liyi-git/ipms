define("echarts/chart/line",["require","./base","zrender/shape/Polyline","../util/shape/Icon","../util/shape/HalfSmoothPolygon","../component/axis","../component/grid","../component/dataZoom","../config","../util/ecData","zrender/tool/util","zrender/tool/color","../chart"],function(g){var f=g("./base");var a=g("zrender/shape/Polyline");var e=g("../util/shape/Icon");var j=g("../util/shape/HalfSmoothPolygon");g("../component/axis");g("../component/grid");g("../component/dataZoom");var k=g("../config");k.line={zlevel:0,z:2,clickable:true,legendHoverLink:true,xAxisIndex:0,yAxisIndex:0,dataFilter:"nearest",itemStyle:{normal:{label:{show:false},lineStyle:{width:2,type:"solid",shadowColor:"rgba(0,0,0,0)",shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0}},emphasis:{label:{show:false}}},symbolSize:2,showAllSymbol:false};var d=g("../util/ecData");var h=g("zrender/tool/util");var c=g("zrender/tool/color");function i(o,l,p,n,m){f.call(this,o,l,p,n,m);this.refresh(n)}i.prototype={type:k.CHART_TYPE_LINE,_buildShape:function(){this.finalPLMap={};this._buildPosition()},_buildHorizontal:function(K,q,p,M){var v=this.series;var I=p[0][0];var B=v[I];var z=this.component.xAxis.getAxis(B.xAxisIndex||0);var J;var u;var t;var O;var s;var o;var w;var L={};var P;var D;for(var H=0,E=q;H<E;H++){if(z.getNameByIndex(H)==null){break}u=z.getCoordByIndex(H);for(var G=0,F=p.length;G<F;G++){J=this.component.yAxis.getAxis(v[p[G][0]].yAxisIndex||0);s=O=w=o=J.getCoord(0);for(var C=0,A=p[G].length;C<A;C++){I=p[G][C];B=v[I];P=B.data[H];D=this.getDataFromOption(P,"-");L[I]=L[I]||[];M[I]=M[I]||{min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY,sum:0,counter:0,average:0};if(D==="-"){if(L[I].length>0){this.finalPLMap[I]=this.finalPLMap[I]||[];this.finalPLMap[I].push(L[I]);L[I]=[]}continue}if(D>=0){O-=C>0?J.getCoordSize(D):s-J.getCoord(D);t=O}else{if(D<0){o+=C>0?J.getCoordSize(D):J.getCoord(D)-w;t=o}}L[I].push([u,t,H,z.getNameByIndex(H),u,s]);if(M[I].min>D){M[I].min=D;M[I].minY=t;M[I].minX=u}if(M[I].max<D){M[I].max=D;M[I].maxY=t;M[I].maxX=u}M[I].sum+=D;M[I].counter++}}O=this.component.grid.getY();var N;for(var G=0,F=p.length;G<F;G++){for(var C=0,A=p[G].length;C<A;C++){I=p[G][C];B=v[I];P=B.data[H];D=this.getDataFromOption(P,"-");if(D!="-"){continue}if(this.deepQuery([P,B,this.option],"calculable")){N=this.deepQuery([P,B],"symbolSize");O+=N*2+5;t=O;this.shapeList.push(this._getCalculableItem(I,H,z.getNameByIndex(H),u,t,"horizontal"))}}}}for(var r in L){if(L[r].length>0){this.finalPLMap[r]=this.finalPLMap[r]||[];this.finalPLMap[r].push(L[r]);L[r]=[]}}this._calculMarkMapXY(M,p,"y");this._buildBorkenLine(K,this.finalPLMap,z,"horizontal")},_buildVertical:function(L,r,q,N){var v=this.series;var J=q[0][0];var B=v[J];var w=this.component.yAxis.getAxis(B.yAxisIndex||0);var K;var u;var t;var z;var o;var E;var p;var M={};var P;var D;for(var I=0,F=r;I<F;I++){if(w.getNameByIndex(I)==null){break}t=w.getCoordByIndex(I);for(var H=0,G=q.length;H<G;H++){K=this.component.xAxis.getAxis(v[q[H][0]].xAxisIndex||0);o=z=p=E=K.getCoord(0);for(var C=0,A=q[H].length;C<A;C++){J=q[H][C];B=v[J];P=B.data[I];D=this.getDataFromOption(P,"-");M[J]=M[J]||[];N[J]=N[J]||{min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY,sum:0,counter:0,average:0};if(D==="-"){if(M[J].length>0){this.finalPLMap[J]=this.finalPLMap[J]||[];this.finalPLMap[J].push(M[J]);M[J]=[]}continue}if(D>=0){z+=C>0?K.getCoordSize(D):K.getCoord(D)-o;u=z}else{if(D<0){E-=C>0?K.getCoordSize(D):p-K.getCoord(D);u=E}}M[J].push([u,t,I,w.getNameByIndex(I),o,t]);if(N[J].min>D){N[J].min=D;N[J].minX=u;N[J].minY=t}if(N[J].max<D){N[J].max=D;N[J].maxX=u;N[J].maxY=t}N[J].sum+=D;N[J].counter++}}z=this.component.grid.getXend();var O;for(var H=0,G=q.length;H<G;H++){for(var C=0,A=q[H].length;C<A;C++){J=q[H][C];B=v[J];P=B.data[I];D=this.getDataFromOption(P,"-");if(D!="-"){continue}if(this.deepQuery([P,B,this.option],"calculable")){O=this.deepQuery([P,B],"symbolSize");z-=O*2+5;u=z;this.shapeList.push(this._getCalculableItem(J,I,w.getNameByIndex(I),u,t,"vertical"))}}}}for(var s in M){if(M[s].length>0){this.finalPLMap[s]=this.finalPLMap[s]||[];this.finalPLMap[s].push(M[s]);M[s]=[]}}this._calculMarkMapXY(N,q,"x");this._buildBorkenLine(L,this.finalPLMap,w,"vertical")},_buildOther:function(I,r,q,K){var w=this.series;var J={};var t;for(var F=0,E=q.length;F<E;F++){for(var C=0,A=q[F].length;C<A;C++){var H=q[F][C];var z=w[H];t=this.component.xAxis.getAxis(z.xAxisIndex||0);var p=this.component.yAxis.getAxis(z.yAxisIndex||0);var o=p.getCoord(0);J[H]=J[H]||[];K[H]=K[H]||{min0:Number.POSITIVE_INFINITY,min1:Number.POSITIVE_INFINITY,max0:Number.NEGATIVE_INFINITY,max1:Number.NEGATIVE_INFINITY,sum0:0,sum1:0,counter0:0,counter1:0,average0:0,average1:0};for(var G=0,D=z.data.length;G<D;G++){var L=z.data[G];var B=this.getDataFromOption(L,"-");if(!(B instanceof Array)){continue}var v=t.getCoord(B[0]);var u=p.getCoord(B[1]);J[H].push([v,u,G,B[0],v,o]);if(K[H].min0>B[0]){K[H].min0=B[0];K[H].minY0=u;K[H].minX0=v}if(K[H].max0<B[0]){K[H].max0=B[0];K[H].maxY0=u;K[H].maxX0=v}K[H].sum0+=B[0];K[H].counter0++;if(K[H].min1>B[1]){K[H].min1=B[1];K[H].minY1=u;K[H].minX1=v}if(K[H].max1<B[1]){K[H].max1=B[1];K[H].maxY1=u;K[H].maxX1=v}K[H].sum1+=B[1];K[H].counter1++}}}for(var s in J){if(J[s].length>0){this.finalPLMap[s]=this.finalPLMap[s]||[];this.finalPLMap[s].push(J[s]);J[s]=[]}}this._calculMarkMapXY(K,q,"xy");this._buildBorkenLine(I,this.finalPLMap,t,"other")},_buildBorkenLine:function(I,A,y,p){var x=p=="other"?"horizontal":p;var w=this.series;var L;for(var M=I.length-1;M>=0;M--){var G=I[M];var z=w[G];var K=A[G];if(z.type===this.type&&K!=null){var n=this._getBbox(G,x);var E=this._sIndex2ColorMap[G];var m=this.query(z,"itemStyle.normal.lineStyle.width");var J=this.query(z,"itemStyle.normal.lineStyle.type");var o=this.query(z,"itemStyle.normal.lineStyle.color");var u=this.getItemStyleColor(this.query(z,"itemStyle.normal.color"),G,-1);var H=this.query(z,"itemStyle.normal.areaStyle")!=null;var s=this.query(z,"itemStyle.normal.areaStyle.color");for(var F=0,B=K.length;F<B;F++){var t=K[F];var r=p!="other"&&this._isLarge(x,t);if(!r){for(var D=0,C=t.length;D<C;D++){L=z.data[t[D][2]];if(this.deepQuery([L,z,this.option],"calculable")||this.deepQuery([L,z],"showAllSymbol")||y.type==="categoryAxis"&&y.isMainAxis(t[D][2])&&this.deepQuery([L,z],"symbol")!="none"){this.shapeList.push(this._getSymbol(G,t[D][2],t[D][3],t[D][0],t[D][1],x))}}}else{t=this._getLargePointList(x,t,z.dataFilter)}var q=new a({zlevel:z.zlevel,z:z.z,style:{miterLimit:m,pointList:t,strokeColor:o||u||E,lineWidth:m,lineType:J,smooth:this._getSmooth(z.smooth),smoothConstraint:n,shadowColor:this.query(z,"itemStyle.normal.lineStyle.shadowColor"),shadowBlur:this.query(z,"itemStyle.normal.lineStyle.shadowBlur"),shadowOffsetX:this.query(z,"itemStyle.normal.lineStyle.shadowOffsetX"),shadowOffsetY:this.query(z,"itemStyle.normal.lineStyle.shadowOffsetY")},hoverable:false,_main:true,_seriesIndex:G,_orient:x});d.pack(q,w[G],G,0,F,w[G].name);this.shapeList.push(q);if(H){var v=new j({zlevel:z.zlevel,z:z.z,style:{miterLimit:m,pointList:h.clone(t).concat([[t[t.length-1][4],t[t.length-1][5]],[t[0][4],t[0][5]]]),brushType:"fill",smooth:this._getSmooth(z.smooth),smoothConstraint:n,color:s?s:c.alpha(E,0.5)},highlightStyle:{brushType:"fill"},hoverable:false,_main:true,_seriesIndex:G,_orient:x});d.pack(v,w[G],G,0,F,w[G].name);this.shapeList.push(v)}}}}},_getBbox:function(l,m){var o=this.component.grid.getBbox();var n=this.xMarkMap[l];if(n.minX0!=null){return[[Math.min(n.minX0,n.maxX0,n.minX1,n.maxX1),Math.min(n.minY0,n.maxY0,n.minY1,n.maxY1)],[Math.max(n.minX0,n.maxX0,n.minX1,n.maxX1),Math.max(n.minY0,n.maxY0,n.minY1,n.maxY1)]]}else{if(m==="horizontal"){o[0][1]=Math.min(n.minY,n.maxY);o[1][1]=Math.max(n.minY,n.maxY)}else{o[0][0]=Math.min(n.minX,n.maxX);o[1][0]=Math.max(n.minX,n.maxX)}}return o},_isLarge:function(l,m){if(m.length<2){return false}else{return l==="horizontal"?Math.abs(m[0][0]-m[1][0])<0.5:Math.abs(m[0][1]-m[1][1])<0.5}},_getLargePointList:function(q,A,l){var y;if(q==="horizontal"){y=this.component.grid.getWidth()}else{y=this.component.grid.getHeight()}var w=A.length;var m=[];if(typeof l!="function"){switch(l){case"min":l=function(C){return Math.max.apply(null,C)};break;case"max":l=function(C){return Math.min.apply(null,C)};break;case"average":l=function(C){var E=0;for(var D=0;D<C.length;D++){E+=C[D]}return E/C.length};break;default:l=function(C){return C[0]}}}var o=[];for(var r=0;r<y;r++){var v=Math.floor(w/y*r);var t=Math.min(Math.floor(w/y*(r+1)),w);if(t<=v){continue}for(var p=v;p<t;p++){o[p-v]=q==="horizontal"?A[p][1]:A[p][0]}o.length=t-v;var s=l(o);var B=-1;var z=Infinity;for(var p=v;p<t;p++){var n=q==="horizontal"?A[p][1]:A[p][0];var x=Math.abs(n-s);if(x<z){B=p;z=x}}var u=A[B].slice();if(q==="horizontal"){u[1]=s}else{u[0]=s}m.push(u)}return m},_getSmooth:function(l){if(l){return 0.3}else{return 0}},_getCalculableItem:function(p,s,m,t,r,o){var q=this.series;var n=q[p].calculableHolderColor||this.ecTheme.calculableHolderColor||k.calculableHolderColor;var l=this._getSymbol(p,s,m,t,r,o);l.style.color=n;l.style.strokeColor=n;l.rotation=[0,0];l.hoverable=false;l.draggable=false;l.style.text=undefined;return l},_getSymbol:function(o,t,m,u,s,n){var q=this.series;var r=q[o];var p=r.data[t];var l=this.getSymbolShape(r,o,p,t,m,u,s,this._sIndex2ShapeMap[o],this._sIndex2ColorMap[o],"#fff",n==="vertical"?"horizontal":"vertical");l.zlevel=r.zlevel;l.z=r.z+1;if(this.deepQuery([p,r,this.option],"calculable")){this.setCalculable(l);l.draggable=true}return l},getMarkCoord:function(m,q){var o=this.series[m];var n=this.xMarkMap[m];var p=this.component.xAxis.getAxis(o.xAxisIndex);var l=this.component.yAxis.getAxis(o.yAxisIndex);if(q.type&&(q.type==="max"||q.type==="min"||q.type==="average")){var r=q.valueIndex!=null?q.valueIndex:n.maxX0!=null?"1":"";return[n[q.type+"X"+r],n[q.type+"Y"+r],n[q.type+"Line"+r],n[q.type+r]]}return[typeof q.xAxis!="string"&&p.getCoordByIndex?p.getCoordByIndex(q.xAxis||0):p.getCoord(q.xAxis||0),typeof q.yAxis!="string"&&l.getCoordByIndex?l.getCoordByIndex(q.yAxis||0):l.getCoord(q.yAxis||0)]},refresh:function(l){if(l){this.option=l;this.series=l.series}this.backupShapeList();this._buildShape()},ontooltipHover:function(m,w){var q=m.seriesIndex;var u=m.dataIndex;var s;var v;var t=q.length;while(t--){s=this.finalPLMap[q[t]];if(s){for(var r=0,n=s.length;r<n;r++){v=s[r];for(var p=0,o=v.length;p<o;p++){if(u===v[p][2]){w.push(this._getSymbol(q[t],v[p][2],v[p][3],v[p][0],v[p][1],"horizontal"))}}}}}},addDataAnimation:function(E,w){var s=this.series;var v={};for(var B=0,A=E.length;B<A;B++){v[E[B][0]]=E[B]}var r;var u;var q;var t;var C;var z;var p;var n=0;function m(){n--;if(n===0){w&&w()}}function F(l){l.style.controlPointList=null}for(var B=this.shapeList.length-1;B>=0;B--){C=this.shapeList[B]._seriesIndex;if(v[C]&&!v[C][3]){if(this.shapeList[B]._main&&this.shapeList[B].style.pointList.length>1){z=this.shapeList[B].style.pointList;u=Math.abs(z[0][0]-z[1][0]);t=Math.abs(z[0][1]-z[1][1]);p=this.shapeList[B]._orient==="horizontal";if(v[C][2]){if(this.shapeList[B].type==="half-smooth-polygon"){var D=z.length;this.shapeList[B].style.pointList[D-3]=z[D-2];this.shapeList[B].style.pointList[D-3][p?0:1]=z[D-4][p?0:1];this.shapeList[B].style.pointList[D-2]=z[D-1]}this.shapeList[B].style.pointList.pop();p?(r=u,q=0):(r=0,q=-t)}else{this.shapeList[B].style.pointList.shift();if(this.shapeList[B].type==="half-smooth-polygon"){var o=this.shapeList[B].style.pointList.pop();p?o[0]=z[0][0]:o[1]=z[0][1];this.shapeList[B].style.pointList.push(o)}p?(r=-u,q=0):(r=0,q=t)}this.shapeList[B].style.controlPointList=null;this.zr.modShape(this.shapeList[B])}else{if(v[C][2]&&this.shapeList[B]._dataIndex===s[C].data.length-1){this.zr.delShape(this.shapeList[B].id);continue}else{if(!v[C][2]&&this.shapeList[B]._dataIndex===0){this.zr.delShape(this.shapeList[B].id);continue}}}this.shapeList[B].position=[0,0];n++;this.zr.animate(this.shapeList[B].id,"").when(this.query(this.option,"animationDurationUpdate"),{position:[r,q]}).during(F).done(m).start()}}if(!n){w&&w()}}};function b(w,m,q){var t=m.x;var s=m.y;var n=m.width;var u=m.height;var z=u/2;if(m.symbol.match("empty")){w.fillStyle="#fff"}m.brushType="both";var p=m.symbol.replace("empty","").toLowerCase();if(p.match("star")){z=p.replace("star","")-0||5;s-=1;p="star"}else{if(p==="rectangle"||p==="arrow"){t+=(n-u)/2;n=u}}var o="";if(p.match("image")){o=p.replace(new RegExp("^image:\\/\\/"),"");p="image";t+=Math.round((n-u)/2)-1;n=u=u+2}p=e.prototype.iconLibrary[p];if(p){var l=m.x;var r=m.y;w.moveTo(l,r+z);w.lineTo(l+5,r+z);w.moveTo(l+m.width-5,r+z);w.lineTo(l+m.width,r+z);var v=this;p(w,{x:t+4,y:s+4,width:n-8,height:u-8,n:z,image:o},function(){v.modSelf();q()})}else{w.moveTo(t,s+z);w.lineTo(t+n,s+z)}}e.prototype.iconLibrary.legendLineIcon=b;h.inherits(i,f);g("../chart").define("line",i);return i});define("echarts/util/shape/HalfSmoothPolygon",["require","zrender/shape/Base","zrender/shape/util/smoothBezier","zrender/tool/util","zrender/shape/Polygon"],function(b){var c=b("zrender/shape/Base");var e=b("zrender/shape/util/smoothBezier");var a=b("zrender/tool/util");function d(f){c.call(this,f)}d.prototype={type:"half-smooth-polygon",buildPath:function(o,g){var f=g.pointList;if(f.length<2){return}if(g.smooth){var q=e(f.slice(0,-2),g.smooth,false,g.smoothConstraint);o.moveTo(f[0][0],f[0][1]);var n;var k;var h;var j=f.length;for(var m=0;m<j-3;m++){n=q[m*2];k=q[m*2+1];h=f[m+1];o.bezierCurveTo(n[0],n[1],k[0],k[1],h[0],h[1])}o.lineTo(f[j-2][0],f[j-2][1]);o.lineTo(f[j-1][0],f[j-1][1]);o.lineTo(f[0][0],f[0][1])}else{b("zrender/shape/Polygon").prototype.buildPath(o,g)}return}};a.inherits(d,c);return d});define(["echarts","echarts/chart/line"],function(a){return a});